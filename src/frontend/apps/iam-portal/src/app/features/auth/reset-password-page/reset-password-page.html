<div class="page">
  <header class="page-header">
    <div>
      <h1 class="page-header__title">Reset your password</h1>
      <p class="page-header__subtitle">
        Choose a new password for your Alvor Bank account.
      </p>
    </div>
  </header>

  <form [formGroup]="form" class="bs-form" (ngSubmit)="onSubmit()">
    <!-- Error banner -->
    <div *ngIf="formError" class="bs-alert bs-alert--danger">
      <div>
        <div class="bs-alert__title">Unable to reset password</div>
        <p class="bs-alert__body">{{ formError }}</p>
      </div>
    </div>

    <!-- Success banner -->
    <div *ngIf="isCompleted" class="bs-alert bs-alert--success">
      <div>
        <div class="bs-alert__title">Password updated</div>
        <p class="bs-alert__body">
          Your password has been changed successfully. You can now sign in with
          your new password.
        </p>
      </div>
    </div>

    <!-- New password -->
    <div class="bs-form-field">
      <label
        class="bs-form-field__label bs-form-field__label--required"
        for="password"
      >
        New password
      </label>
      <div class="bs-form-field__control">
        <input
          id="password"
          type="password"
          autocomplete="new-password"
          formControlName="password"
        />
      </div>
      <p class="bs-form-field__hint">
        Use at least 8 characters. Consider a mix of letters, numbers and
        symbols.
      </p>
      <p
        class="bs-form-field__error"
        *ngIf="password.touched && password.invalid"
      >
        Your password must be at least 8 characters long.
      </p>
    </div>

    <!-- Confirm password -->
    <div class="bs-form-field">
      <label
        class="bs-form-field__label bs-form-field__label--required"
        for="confirmPassword"
      >
        Confirm password
      </label>
      <div class="bs-form-field__control">
        <input
          id="confirmPassword"
          type="password"
          autocomplete="new-password"
          formControlName="confirmPassword"
        />
      </div>
      <p
        class="bs-form-field__error"
        *ngIf="confirmPassword.touched && confirmPassword.invalid"
      >
        Please confirm your new password.
      </p>
      <p class="bs-form-field__error" *ngIf="hasPasswordMismatch">
        The passwords do not match.
      </p>
    </div>

    <!-- Actions -->
    <div class="reset-actions">
      <button
        class="bs-btn bs-btn--primary"
        type="submit"
        [disabled]="isSubmitting || isCompleted"
      >
        <span *ngIf="!isSubmitting && !isCompleted">Update password</span>
        <span *ngIf="isSubmitting">Updatingâ€¦</span>
        <span *ngIf="!isSubmitting && isCompleted">Updated</span>
      </button>
    </div>
  </form>

  <div class="reset-links">
    <button type="button" class="bs-btn bs-btn--ghost" (click)="goToLogin()">
      Back to sign in
    </button>
  </div>
</div>
